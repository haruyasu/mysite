{% extends "blog/blog.html" %}
{% block content_post %}
    <h3 class="my-4">New Post</h3>

    <form class="post-form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class='save btn btn-dark'>Save</button>
    </form>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rangy/1.3.0/rangy-core.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rangy/1.3.0/rangy-classapplier.min.js"></script>

    <script>
        rangy.init();

        var HighlighterButton = MediumEditor.extensions.button.extend({
            name: 'highlighter',
            tagNames: ['mark'],
            contentDefault: '<b>H</b>',
            contentFA: '<i class="fa fa-paint-brush"></i>',
            aria: 'Highlight',
            action: 'highlight',

            init: function () {
                MediumEditor.extensions.button.prototype.init.call(this);

                this.classApplier = rangy.createClassApplier('highlight', {
                    elementTagName: 'mark',
                    normalize: true
                });
            },

            handleClick: function (event) {
                this.classApplier.toggleSelection();

                // Ensure the editor knows about an html change so watchers are notified
                // ie: <textarea> elements depend on the editableInput event to stay synchronized
                this.base.checkContentChanged();
            }
        });

        var editor = new MediumEditor('.editable', {
            toolbar: {
                buttons: ['highlighter', 'bold', 'italic', 'underline', 'strikethrough', 'quote', 'anchor', 'image', 'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'orderedlist', 'unorderedlist', 'pre', 'removeFormat', 'outdent', 'indent', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'html'],
            },
            extensions: {
                'highlighter': new HighlighterButton()
            },
            buttonLabels: 'fontawesome',
            anchor: {
                targetCheckbox: true
            }
        });
    </script>
{% endblock %}
